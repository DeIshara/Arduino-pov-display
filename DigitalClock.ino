
int sp=300,analogread;
int pin[10],first,second,temp,tm1=0,last=0;
unsigned long int time;
int sec=0,mn=9,hr=2;

void setup() {
  for(int i=2;i<12;i++){
    pin[i-2]=13-i;
  }
  for(int i=0;i<10;i++){
    pinMode(pin[i],OUTPUT);
  }
  Serial.begin(9600);
}

byte nn[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0}};

byte n0[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,1,1,1,1,1,1,1,0},
                 {0,1,1,1,1,1,1,1,1,1},
                 {0,1,1,0,0,0,0,0,1,1},
                 {0,1,1,0,0,0,0,0,1,1},
                 {0,1,1,0,0,0,0,0,1,1},
                 {0,1,1,0,0,0,0,0,1,1},
                 {0,1,1,1,1,1,1,1,1,1},
                 {0,0,1,1,1,1,1,1,1,0},
                 {0,0,0,0,0,0,0,0,0,0}};

byte n1[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,1,1,1,0,0},
                 {0,0,0,0,1,1,1,1,0,0},
                 {0,0,0,1,1,1,1,1,0,0},
                 {0,0,0,0,0,1,1,1,0,0},
                 {0,0,0,0,0,1,1,1,0,0},
                 {0,0,0,0,0,1,1,1,0,0},
                 {0,0,0,1,1,1,1,1,1,1},
                 {0,0,0,1,1,1,1,1,1,1},
                 {0,0,0,0,0,0,0,0,0,0}};
                  
byte n2[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,1,1,1,1,1,0,0},
                 {0,0,1,1,1,1,1,1,1,0},
                 {0,0,1,1,0,0,0,1,1,0},
                 {0,0,0,0,0,0,1,1,0,0},
                 {0,0,0,0,0,1,1,0,0,0},
                 {0,0,0,0,1,1,0,0,0,0},
                 {0,0,1,1,1,1,1,1,1,1},
                 {0,0,1,1,1,1,1,1,1,1},
                 {0,0,0,0,0,0,0,0,0,0}};

byte n3[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,1,1,1,1,1,1,0,0},
                 {0,1,1,1,1,1,1,1,1,0},
                 {0,1,1,0,0,0,1,1,1,0},
                 {0,0,0,0,0,1,1,0,0,0},
                 {0,0,0,0,0,1,1,0,0,0},
                 {0,1,1,0,0,0,1,1,1,0},
                 {0,1,1,1,1,1,1,1,1,0},
                 {0,0,1,1,1,1,1,1,0,0},
                 {0,0,0,0,0,0,0,0,0,0}};

byte n4[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,1,1,1,0,0},
                 {0,0,0,0,1,1,1,1,0,0},
                 {0,0,0,1,1,0,1,1,0,0},
                 {0,0,1,1,0,0,1,1,0,0},
                 {0,1,1,0,0,0,1,1,0,0},
                 {0,1,1,1,1,1,1,1,1,1},
                 {0,1,1,1,1,1,1,1,1,1},
                 {0,0,0,0,0,0,1,1,0,0},
                 {0,0,0,0,0,0,0,0,0,0}};

byte n5[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,1,1,1,1,1,1,1},
                 {0,0,1,1,1,1,1,1,1,1},
                 {0,0,1,1,1,1,0,0,0,0},
                 {0,0,0,1,1,1,1,1,1,0},
                 {0,0,0,0,0,0,0,1,1,1},
                 {0,0,0,0,0,0,0,1,1,1},
                 {0,0,1,1,1,1,1,1,1,1},
                 {0,0,1,1,1,1,1,1,1,0},
                 {0,0,0,0,0,0,0,0,0,0}};

byte n6[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,1,1,1,1,1,1,0},
                 {0,0,1,1,1,1,1,1,1,1},
                 {0,0,1,1,0,0,0,0,0,0},
                 {0,0,1,1,1,1,1,1,1,0},
                 {0,0,1,1,1,1,1,1,1,1},
                 {0,0,1,1,0,0,0,0,1,1},
                 {0,0,1,1,1,1,1,1,1,1},
                 {0,0,0,1,1,1,1,1,1,0},
                 {0,0,0,0,0,0,0,0,0,0}};

byte n7[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,1,1,1,1,1,1,1},
                 {0,0,0,1,1,1,1,1,1,1},
                 {0,0,0,0,0,0,0,1,1,1},
                 {0,0,0,0,0,0,1,1,1,0},
                 {0,0,0,0,0,1,1,1,0,0},
                 {0,0,0,0,1,1,1,0,0,0},
                 {0,0,0,1,1,1,0,0,0,0},
                 {0,0,0,1,1,1,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0}};

byte n8[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,1,1,1,1,1,1,1,0},
                 {0,1,1,1,1,1,1,1,1,1},
                 {0,1,1,0,0,0,0,0,1,1},
                 {0,1,1,1,1,1,1,1,1,1},
                 {0,1,1,1,1,1,1,1,1,1},
                 {0,1,1,0,0,0,0,0,1,1},
                 {0,1,1,1,1,1,1,1,1,1},
                 {0,0,1,1,1,1,1,1,1,0},
                 {0,0,0,0,0,0,0,0,0,0}};

byte n9[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,1,1,1,1,1,1,0},
                 {0,0,1,1,1,1,1,1,1,1},
                 {0,0,1,1,0,0,0,0,1,1},
                 {0,0,1,1,1,1,1,1,1,1},
                 {0,0,0,1,1,1,1,1,1,1},
                 {0,0,0,0,0,0,0,0,1,1},
                 {0,0,1,1,1,1,1,1,1,1},
                 {0,0,0,1,1,1,1,1,1,0},
                 {0,0,0,0,0,0,0,0,0,0}};
                 
byte co[10][10]={{0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,1,1,1,0,0,0,0},
                 {0,0,0,1,1,1,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,1,1,1,0,0,0,0},
                 {0,0,0,1,1,1,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0},
                 {0,0,0,0,0,0,0,0,0,0}};

byte a[10][10]={{0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,1,1,0,0,0,0},
                {0,0,0,1,0,0,1,0,0,0},
                {0,0,1,1,1,1,1,1,0,0},
                {0,1,0,0,0,0,0,0,1,0},
                {1,0,0,0,0,0,0,0,0,1},
                {0,0,0,0,0,0,0,0,0,0}};
                 
byte m[10][10]={{0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0},
                {0,1,1,0,0,0,1,1,0,0},
                {0,1,0,1,0,1,0,1,0,0},
                {0,1,0,0,1,0,0,1,0,0},
                {0,1,0,0,0,0,0,1,0,0},
                {0,1,0,0,0,0,0,1,0,0},
                {0,0,0,0,0,0,0,0,0,0}};

byte p[10][10]={{0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0},
                {0,0,1,1,1,1,1,0,0,0},
                {0,0,1,0,0,0,0,1,0,0},
                {0,0,1,1,1,1,1,0,0,0},
                {0,0,1,0,0,0,0,0,0,0},
                {0,0,1,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0}};

void loop() {
  analogread=analogRead(A7);
  time=millis()/1000;
  //
  tm1=time-last;
  if(tm1==10){
    last=millis()/1000;
  }
  //
  if(temp!=time){
    sec=sec+1;
  }
  temp=time;
  if(sec==60){
    sec=0;
    mn=mn+1;
  }
  if(mn==60){
    mn=0;
    hr=hr+1;
  }
  if(hr==13){
    hr=1;
  }
  //Serial.println(tm1);
  /*Serial.print(hr);
  Serial.print(" ");
  Serial.print(mn);
  Serial.print(" ");
  Serial.println(sec);*/
  if(analogread>350){
    
    for(int i=0;i<6;i++){
      //draw(nn);
    }
    pm();
    drawNumber(sec);
    colon(time);
    drawNumber(mn);
    colon(time);
    drawNumber(hr);
    }
}

void drawNumber(int n){
  first=n/10;
  second=n%10;
  switch(second){
    case 0:draw(n0);
    break;
    case 1:draw(n1);
    break;
    case 2:draw(n2);
    break;
    case 3:draw(n3);
    break;
    case 4:draw(n4);
    break;
    case 5:draw(n5);
    break;
    case 6:draw(n6);
    break;
    case 7:draw(n7);
    break;
    case 8:draw(n8);
    break;
    case 9:draw(n9);
    break;
  }
  switch(first){
    case 0:draw(n0);
    break;
    case 1:draw(n1);
    break;
    case 2:draw(n2);
    break;
    case 3:draw(n3);
    break;
    case 4:draw(n4);
    break;
    case 5:draw(n5);
    break;
    case 6:draw(n6);
    break;
    case 7:draw(n7);
    break;
    case 8:draw(n8);
    break;
    case 9:draw(n9);
    break;
  }
}

void colon(int n){
  if(n%2==0){
    draw(co);
  }
  else{
     draw(nn);
  }
}

void am(){
  draw(m);
  delay(1);
  draw(a);
  delay(2);
}

void pm(){
  draw(m);
  delay(1);
  draw(p);
  delay(2);
  
}
void draw(byte line[10][10]){

  for(int i=1;i<9;i++){
  digitalWrite(pin[i],line[i][9]);
  }
  delayMicroseconds(sp);
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],0);
  }
  ////
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],line[i][8]);
  }
  delayMicroseconds(sp);
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],0);
  }
  ////
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],line[i][7]);
  }
  delayMicroseconds(sp);
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],0);
  }
  ////
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],line[i][6]);
  }
  delayMicroseconds(sp);
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],0);
  }
  ////
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],line[i][5]);
  }
  delayMicroseconds(sp);
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],0);
  }
  ////
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],line[i][4]);
  }
  delayMicroseconds(sp);
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],0);
  }
  ////
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],line[i][3]);
  }
  delayMicroseconds(sp);
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],0);
  }
  ////
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],line[i][2]);
  }
  delayMicroseconds(sp);
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],0);
  }
  ////
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],line[i][1]);
  }
  delayMicroseconds(sp);
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],0);
  }
  ////
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],line[i][0]);
  }
  delayMicroseconds(sp);
  for(int i=1;i<9;i++){
  digitalWrite(pin[i],0);
  }
}

////
